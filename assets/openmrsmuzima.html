<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Patient Form</title>
    <link rel="stylesheet" style="text/css" href="deps/opt/bootstrap.css" />
  </head>
  <body>
    <h1>Muzima Patient Form </h1>
    <form></form>
    <div id="res" class="alert"></div>
    <script type="text/javascript" src="deps/jquery.min.js"></script>
    <script type="text/javascript" src="deps/underscore.js"></script>
    <script type="text/javascript" src="deps/opt/jsv.js"></script>
    <script type="text/javascript" src="lib/jsonform.js"></script>
    <script type="text/javascript">
      $('form').jsonForm({
        schema: {
          datasource: {
            type: 'string',
            title: 'Datasource',
	        default:'954b9e59-eba0-4679-afbb-2878580c054d',
            required: true
          },
          discriminator: {
            type: 'string',
            title: 'Discriminator',
			default:'encounter'
          },
		  payload:{
		  type:'object',
		  title:'Payload',
		  properties:{
		  patient :{
		  type:'object',
		  title:'Patient Demographics',
		  "properties": {
                birth: {
                    type: 'string',
                    title: 'BirthDate',
                    "maxLength": 10
                },
                birthEstimated: {
                    "type": "boolean",
                    "title": "Estimated Birth"
                },
                givenName: {
                    "type": "string",
                    "title": "Given Name"
                },
                familyName: {
                    "type": "string",
                    "title": "Family Name"
                },
                identifier: {
                    "type": "string",
                    "title": "Medical Identification Number"
                },
                gender: {
                    "type": "string",
                    "title": "Gender",
                    "enum": [ "male", "female", "na" ]
                },
                age: {
                    "type": "integer",
                    "title": "Age"
                },
				person_uuid:{
				title:'Persounuuid',
				type:'string',
				default:'269857b6-f0b9-4c93-af4a-f18293679e89'
				
				},
				
            }
		  
		  },
		  obs: {
						"type": "array",
						title:'Observation',
						
						"items": [
                {
                    "type": "object",
                    "properties": {
                        name: {
                            "type": "string",
                            "title": "Question",
                            "default": "Appearance Of Specimen"
                        },
                        code: {
                            "type": "integer",
                            "title": "Coded Question",
                            "default": 1114
                        },
                        value: {
                            "type": "string",
                            "title": "Value",
							default:'1364AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'
                        },
                        type: {
                            "type": "string",
                            "title": "Type",
                            "default": "coded"
                        },
                        datetime: {
                            "type": "string",
                            "title": "Observation Date"
                        }
                    }
                },
                {
                    type: "object",
                    "properties": {
                        name: {
                            "type": "string",
                            "title": "Question",
                            "default": "Sputum Fast Acid Bascilli"
                        },
                        code: {
                            "type": "integer",
                            "title": "Coded Question",
                            "default": 1115
                        },
                        value: {
                            "type": "string",
                            "title": "Value"
							
                        },
                        type: {
                            "type": "string",
                            "title": "Type",
                            "default": "coded"
                        },
                        datetime: {
                            "type": "string",
                            "title": "Observation Date"
                        }
                    }
                }
            ]
        },
		encounter: {
            type: 'object',
            title: 'Encounter',
            properties: {
                form: {
                    type: 'integer',
                    title: 'Form',
					default:1
					
                },
				uuid:{
				type: 'string',
				title: 'Formuuid',
				default:'fe9fc58f-d196-46cb-956d-f46445f558d9'
				},
				
				datetime: {
                    "type": "string",
                    "title": "Encounter Date",
                    "maxLength": 10
                },
                "location": {
                    "type": "integer",
                    "title": "Encounter Location"
                },
                "provider": {
                    "type": "integer",
                    "title": "Encounter Provider"
                },
				"type":{
				type:'string',
				title:'Encountertype',
				enum:['LabVisit','Dr','Other']
				}
            }
        },
		

        }}},
		
 
		
        onSubmit: function (errors, values) {
          if (errors) {
            $('#res').html('<p>check Form fields?? Openmrs</p>');
          }
          else {
            
          }
		   alert('Form submitted. Values object:\n' + JSON.stringify(values, null, 2));
        },
		
		
      });
    </script>
  </body>
</html>